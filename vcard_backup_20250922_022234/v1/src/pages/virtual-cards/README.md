# 虚拟卡管理功能

## 功能概述

虚拟卡管理系统提供完整的虚拟卡生命周期管理功能，包括卡片创建、充值、提现、状态管理等核心操作。

## 主要功能

### 1. 虚拟卡列表
- **卡号显示**: 脱敏显示（4532****1234），支持一键复制完整卡号
- **CVV管理**: 隐藏显示（***），支持复制真实CVV
- **有效期**: MM/YY格式显示，支持复制
- **余额显示**: 实时显示卡片余额，支持多币种
- **状态管理**: 可视化状态标签（已激活、已冻结等）
- **备注信息**: 支持业务订单号等备注信息

### 2. 搜索和筛选
- **卡号搜索**: 支持卡号模糊查找
- **备注搜索**: 支持备注内容模糊查找  
- **状态筛选**: 按卡片状态进行筛选
- **实时搜索**: 输入即时过滤结果

### 3. 卡片操作
- **充值功能**: 
  - 实时余额显示
  - 金额输入验证
  - 操作确认机制
- **提现功能**:
  - 余额充足性检查
  - 最大提现金额限制
  - 安全提醒提示

### 4. 创建虚拟卡
- **卡类型选择**:
  - E0000001: 香港卡
  - G0000001: 英国卡
- **金额设置**: 默认5.00美元，支持自定义
- **过期时间**: 默认3年，可选择30天-4年范围
- **备注信息**: 支持最长32位备注

### 5. 卡片详情
- **基本信息**: 完整卡片信息展示
- **授权记录**: 交易授权历史查询
- **结算记录**: 交易结算明细查看
- **侧拉抽屉**: 优雅的详情展示方式

## 技术实现

### 前端技术栈
- **React 19.1.0**: 现代化React框架
- **Ant Design Pro**: 企业级UI组件库
- **ProTable**: 高级表格组件
- **TypeScript**: 类型安全保障

### 组件结构
```
src/pages/virtual-cards/
├── index.tsx                    # 主列表页面
├── components/
│   ├── CreateCardForm.tsx       # 创建卡片表单
│   ├── RechargeForm.tsx         # 充值表单
│   ├── WithdrawForm.tsx         # 提现表单
│   └── CardDetailDrawer.tsx     # 详情侧拉抽屉
├── types/
│   └── virtual-card.ts          # 类型定义
├── services/
│   └── virtual-card.ts          # API服务
└── README.md                    # 文档说明
```

### API接口设计
- `GET /api/virtual-cards`: 获取卡片列表
- `POST /api/virtual-cards`: 创建虚拟卡
- `GET /api/virtual-cards/:cardId`: 获取卡片详情
- `POST /api/virtual-cards/recharge`: 卡片充值
- `POST /api/virtual-cards/withdraw`: 卡片提现
- `GET /api/virtual-cards/:cardId/auth-records`: 授权记录
- `GET /api/virtual-cards/:cardId/settle-records`: 结算记录

## 安全特性

### 数据脱敏
- 卡号：显示前4位和后4位，中间8位用*替代
- CVV：默认显示***，点击复制获取真实值
- 敏感信息复制需要用户主动触发

### 操作验证
- 充值/提现金额范围验证
- 余额充足性检查
- 表单数据格式验证
- 错误处理和用户提示

### 权限控制
- 基于用户角色的功能访问控制
- 操作日志记录
- 安全的API调用机制

## 用户体验

### 交互设计
- 响应式布局，适配各种屏幕尺寸
- 直观的图标和按钮设计
- 清晰的状态提示和错误信息
- 流畅的动画和过渡效果

### 操作流程
1. **查看卡片**: 列表页面浏览所有虚拟卡
2. **搜索筛选**: 快速定位目标卡片
3. **卡片操作**: 一键充值、提现操作
4. **详情查看**: 侧拉抽屉查看完整信息
5. **创建新卡**: 弹窗表单创建虚拟卡

### 性能优化
- 列表分页加载，避免大数据量卡顿
- 懒加载详情信息，提升页面响应速度
- 本地状态管理，减少不必要的API调用
- 防抖搜索，优化用户输入体验

## 扩展功能

### 计划中功能
- 批量操作支持
- 数据导出功能
- 高级筛选条件
- 卡片使用统计
- 交易数据分析
- 移动端适配优化

### 集成能力
- 支持多卡商API对接
- 支持多币种管理
- 支持自定义字段扩展
- 支持第三方系统集成

## 使用指南

### 快速开始
1. 访问虚拟卡管理页面
2. 点击"创建虚拟卡"按钮
3. 填写必要信息并提交
4. 在列表中查看和管理卡片

### 常见操作
- **复制卡号**: 点击卡号旁边的复制图标
- **查看详情**: 点击"详情"按钮打开侧拉抽屉
- **充值操作**: 点击"充值"按钮，输入金额确认
- **提现操作**: 点击"提现"按钮，注意余额限制

### 注意事项
- 创建卡片后无法修改卡类型
- 提现金额不能超过当前余额
- 冻结状态的卡片无法进行充值提现
- 备注信息最长支持32个字符
