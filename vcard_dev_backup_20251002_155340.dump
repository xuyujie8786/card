--
-- PostgreSQL database dump
--

\restrict pRVhAGSdz5ziO7EpjpAXDLB5BeNUi0xtaXOJzfppvtiD6QBk6LVMN5YRlDCmDQP

-- Dumped from database version 16.10
-- Dumped by pg_dump version 16.10

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: card_operations; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.card_operations (
    id text NOT NULL,
    card_id text NOT NULL,
    user_id text NOT NULL,
    operation_type text NOT NULL,
    amount numeric(15,2),
    request_id text,
    status text DEFAULT 'PENDING'::text NOT NULL,
    response_data jsonb,
    error_message text,
    created_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.card_operations OWNER TO postgres;

--
-- Name: cards; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cards (
    id text NOT NULL,
    user_id text NOT NULL,
    card_id text NOT NULL,
    card_no text NOT NULL,
    cvv text NOT NULL,
    exp_date text NOT NULL,
    trade_no text,
    currency text NOT NULL,
    balance numeric(15,2) DEFAULT 0 NOT NULL,
    status text DEFAULT 'PENDING'::text NOT NULL,
    product_code text NOT NULL,
    card_bin text,
    remark text,
    sub_id text,
    email text,
    used_amount numeric(15,2) DEFAULT 0 NOT NULL,
    total_amount numeric(15,2) DEFAULT 0 NOT NULL,
    created_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.cards OWNER TO postgres;

--
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id text NOT NULL,
    username text NOT NULL,
    email text NOT NULL,
    password_hash text NOT NULL,
    role text DEFAULT 'USER'::text NOT NULL,
    status text DEFAULT 'ACTIVE'::text NOT NULL,
    balance numeric(15,2) DEFAULT 0 NOT NULL,
    created_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    updated_at timestamp(3) without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL
);


ALTER TABLE public.users OWNER TO postgres;

--
-- Data for Name: card_operations; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.card_operations (id, card_id, user_id, operation_type, amount, request_id, status, response_data, error_message, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: cards; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.cards (id, user_id, card_id, card_no, cvv, exp_date, trade_no, currency, balance, status, product_code, card_bin, remark, sub_id, email, used_amount, total_amount, created_at, updated_at) FROM stdin;
\.


--
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, username, email, password_hash, role, status, balance, created_at, updated_at) FROM stdin;
admin-user-id	admin	admin@example.com	$argon2id$v=19$m=65536,t=3,p=4$iUxk7f5Q9QyEl0JyePMrCQ$nPSPeH/eWblOs79gS8/Dh4H+sFP/8UkAu54kKXPBB58	ADMIN	ACTIVE	10000.00	2025-09-19 16:58:54.647	2025-09-19 16:58:54.647
test-user-id	testuser	testuser@example.com	$argon2id$v=19$m=65536,t=3,p=4$+chc/3ES+2/n6vMkAvxfpA$xYFyEIPZDAeDbjBeKlcEHBu4kovgKBnNEriAETiquU4	USER	ACTIVE	5000.00	2025-09-19 16:58:54.647	2025-09-19 16:58:54.647
\.


--
-- Name: card_operations card_operations_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_operations
    ADD CONSTRAINT card_operations_pkey PRIMARY KEY (id);


--
-- Name: card_operations card_operations_request_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_operations
    ADD CONSTRAINT card_operations_request_id_key UNIQUE (request_id);


--
-- Name: cards cards_card_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cards
    ADD CONSTRAINT cards_card_id_key UNIQUE (card_id);


--
-- Name: cards cards_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cards
    ADD CONSTRAINT cards_pkey PRIMARY KEY (id);


--
-- Name: users users_email_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_email_key UNIQUE (email);


--
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- Name: users users_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_username_key UNIQUE (username);


--
-- Name: card_operations card_operations_card_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_operations
    ADD CONSTRAINT card_operations_card_id_fkey FOREIGN KEY (card_id) REFERENCES public.cards(id) ON DELETE CASCADE;


--
-- Name: card_operations card_operations_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.card_operations
    ADD CONSTRAINT card_operations_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: cards cards_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cards
    ADD CONSTRAINT cards_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.users(id) ON DELETE CASCADE;


--
-- Name: DEFAULT PRIVILEGES FOR TABLES; Type: DEFAULT ACL; Schema: public; Owner: postgres
--

ALTER DEFAULT PRIVILEGES FOR ROLE postgres IN SCHEMA public GRANT ALL ON TABLES TO postgres;


--
-- PostgreSQL database dump complete
--

\unrestrict pRVhAGSdz5ziO7EpjpAXDLB5BeNUi0xtaXOJzfppvtiD6QBk6LVMN5YRlDCmDQP

